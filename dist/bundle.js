(()=>{var __webpack_modules__={138:()=>{eval("const $app = document.getElementById('app');\r\nconst $observe = document.getElementById('observe');\r\n\r\n    const API = 'https://api.escuelajs.co/api/v1/products?offset={inicio}&limit={fin}';\r\n\r\nconst getPagination = () => {\r\n    return parseInt(localStorage.getItem('pagination')) || 0;\r\n}\r\n\r\nconst resetPagination = () => {\r\n    localStorage.removeItem('pagination');\r\n}\r\n\r\nconst nextPage = () => {\r\n  const pagination = getPagination() + 5;\r\n  localStorage.setItem('pagination', pagination);\r\n}\r\n\r\nconst getApi = api => {\r\n  const pagination = getPagination();\r\n  const offset = 5 + (pagination * 10);\r\n  const limit = 10 + (pagination * 10);\r\n  return api.replace('{inicio}', offset).replace('{fin}', limit);\r\n}\r\n\r\nconst getData = async api => {\r\n  try {\r\n      const response = await fetch(api);\r\n      const data = await response.json();\r\n      const output = data.map(product => (`\r\n              \r\n              <article class=\"Card\">\r\n                  <img src=\"${product.images[0]}\" alt=\"Product Image\" />\r\n                  <h2>\r\n                      ${product.title}\r\n                      <small>$ ${product.price}</small>\r\n                      \r\n                  </h2>\r\n              </article>\r\n              \r\n          `)).join('');\r\n\r\n      nextPage();\r\n\r\n      const newItem = document.createElement('section');\r\n      newItem.classList.add('Items');\r\n      newItem.innerHTML = output;\r\n      $app.appendChild(newItem);\r\n\r\n      if (data.length < 10) {\r\n          let newItem = document.createElement('div');\r\n          newItem.classList.add('Message');\r\n          newItem.innerHTML = 'Todos los productos Obtenidos';\r\n          $app.appendChild(newItem);\r\n          $observe.remove();\r\n      }\r\n  } catch (error) {\r\n      console.log(error);\r\n  }\r\n}\r\n\r\nconst loadData = async () => {\r\n  await getData(getApi(API));\r\n}\r\n\r\nconst intersectionObserver = new IntersectionObserver(entries => {\r\n  // logic...\r\n  if (entries[0].isIntersecting) {\r\n    loadData();\r\n}\r\n}, {\r\n  rootMargin: '0px 0px 100% 0px',\r\n});\r\n\r\nintersectionObserver.observe($observe);\r\nwindow.addEventListener(\"beforeunload\", () => {\r\n  resetPagination();\r\n});\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM4LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxPQUFPLFFBQVEsSUFBSTtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsT0FBTyxxQkFBcUIsSUFBSTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsa0JBQWtCO0FBQ2hEO0FBQ0Esd0JBQXdCO0FBQ3hCLGlDQUFpQyxjQUFjO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vanMtY2hhbGxlbmdlLy4vc3JjL2luZGV4LmpzP2I2MzUiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgJGFwcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKTtcclxuY29uc3QgJG9ic2VydmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb2JzZXJ2ZScpO1xyXG5cclxuICAgIGNvbnN0IEFQSSA9ICdodHRwczovL2FwaS5lc2N1ZWxhanMuY28vYXBpL3YxL3Byb2R1Y3RzP29mZnNldD17aW5pY2lvfSZsaW1pdD17ZmlufSc7XHJcblxyXG5jb25zdCBnZXRQYWdpbmF0aW9uID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwYWdpbmF0aW9uJykpIHx8IDA7XHJcbn1cclxuXHJcbmNvbnN0IHJlc2V0UGFnaW5hdGlvbiA9ICgpID0+IHtcclxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdwYWdpbmF0aW9uJyk7XHJcbn1cclxuXHJcbmNvbnN0IG5leHRQYWdlID0gKCkgPT4ge1xyXG4gIGNvbnN0IHBhZ2luYXRpb24gPSBnZXRQYWdpbmF0aW9uKCkgKyA1O1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwYWdpbmF0aW9uJywgcGFnaW5hdGlvbik7XHJcbn1cclxuXHJcbmNvbnN0IGdldEFwaSA9IGFwaSA9PiB7XHJcbiAgY29uc3QgcGFnaW5hdGlvbiA9IGdldFBhZ2luYXRpb24oKTtcclxuICBjb25zdCBvZmZzZXQgPSA1ICsgKHBhZ2luYXRpb24gKiAxMCk7XHJcbiAgY29uc3QgbGltaXQgPSAxMCArIChwYWdpbmF0aW9uICogMTApO1xyXG4gIHJldHVybiBhcGkucmVwbGFjZSgne2luaWNpb30nLCBvZmZzZXQpLnJlcGxhY2UoJ3tmaW59JywgbGltaXQpO1xyXG59XHJcblxyXG5jb25zdCBnZXREYXRhID0gYXN5bmMgYXBpID0+IHtcclxuICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwaSk7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgIGNvbnN0IG91dHB1dCA9IGRhdGEubWFwKHByb2R1Y3QgPT4gKGBcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICA8YXJ0aWNsZSBjbGFzcz1cIkNhcmRcIj5cclxuICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke3Byb2R1Y3QuaW1hZ2VzWzBdfVwiIGFsdD1cIlByb2R1Y3QgSW1hZ2VcIiAvPlxyXG4gICAgICAgICAgICAgICAgICA8aDI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAke3Byb2R1Y3QudGl0bGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICA8c21hbGw+JCAke3Byb2R1Y3QucHJpY2V9PC9zbWFsbD5cclxuICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICA8L2gyPlxyXG4gICAgICAgICAgICAgIDwvYXJ0aWNsZT5cclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgIGApKS5qb2luKCcnKTtcclxuXHJcbiAgICAgIG5leHRQYWdlKCk7XHJcblxyXG4gICAgICBjb25zdCBuZXdJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VjdGlvbicpO1xyXG4gICAgICBuZXdJdGVtLmNsYXNzTGlzdC5hZGQoJ0l0ZW1zJyk7XHJcbiAgICAgIG5ld0l0ZW0uaW5uZXJIVE1MID0gb3V0cHV0O1xyXG4gICAgICAkYXBwLmFwcGVuZENoaWxkKG5ld0l0ZW0pO1xyXG5cclxuICAgICAgaWYgKGRhdGEubGVuZ3RoIDwgMTApIHtcclxuICAgICAgICAgIGxldCBuZXdJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICBuZXdJdGVtLmNsYXNzTGlzdC5hZGQoJ01lc3NhZ2UnKTtcclxuICAgICAgICAgIG5ld0l0ZW0uaW5uZXJIVE1MID0gJ1RvZG9zIGxvcyBwcm9kdWN0b3MgT2J0ZW5pZG9zJztcclxuICAgICAgICAgICRhcHAuYXBwZW5kQ2hpbGQobmV3SXRlbSk7XHJcbiAgICAgICAgICAkb2JzZXJ2ZS5yZW1vdmUoKTtcclxuICAgICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGxvYWREYXRhID0gYXN5bmMgKCkgPT4ge1xyXG4gIGF3YWl0IGdldERhdGEoZ2V0QXBpKEFQSSkpO1xyXG59XHJcblxyXG5jb25zdCBpbnRlcnNlY3Rpb25PYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihlbnRyaWVzID0+IHtcclxuICAvLyBsb2dpYy4uLlxyXG4gIGlmIChlbnRyaWVzWzBdLmlzSW50ZXJzZWN0aW5nKSB7XHJcbiAgICBsb2FkRGF0YSgpO1xyXG59XHJcbn0sIHtcclxuICByb290TWFyZ2luOiAnMHB4IDBweCAxMDAlIDBweCcsXHJcbn0pO1xyXG5cclxuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSgkb2JzZXJ2ZSk7XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIsICgpID0+IHtcclxuICByZXNldFBhZ2luYXRpb24oKTtcclxufSk7XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///138\n")}},__webpack_exports__={};__webpack_modules__[138]()})();