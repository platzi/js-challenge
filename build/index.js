const $app=document.getElementById("app"),$observe=document.getElementById("observe"),API="https://api.escuelajs.co/api/v1/products",maxPage=200,startOffset=5,pageLimit=10;localStorage.removeItem("pagination");const getData=async(e,t,a)=>{const n=`${e}?offset=${t}&limit=${a}`;localStorage.setItem("pagination",t);const s=await fetch(n),o=(await s.json()).map((e=>`<article class="Card Item">\n      <img src="${e.images[0]}" alt="${e.title}"/>\n      <h2> ${e.title}\n        <small>$ ${e.price}</small>\n      </h2>\n    </article>`));let i=document.createElement("section");i.classList.add("Items"),i.innerHTML=o.join(" "),$app.appendChild(i)},unobserve=e=>{let t=document.createElement("section");t.classList.add("Item"),t.innerHTML="<h2>Todos los productos Obtenidos</h2>",$app.appendChild(t),intersectionObserver.unobserve(e)},loadData=async e=>{await getData(API,e,10)},intersectionObserver=new IntersectionObserver((e=>{if(e[0].isIntersecting){const e=localStorage.getItem("pagination"),t=e?parseInt(e)+10:5;if(t-5>=200)return unobserve($observe);loadData(t)}}),{rootMargin:"0px 0px 100% 0px"});intersectionObserver.observe($observe);